# Frontend - Messenger Application

Frontend приложение на Next.js для мессенджер приложения.

## Технологический стек

- **Framework**: Next.js 16+ (App Router)
- **UI Library**: React 19+
- **Styling**: Tailwind CSS
- **TypeScript**: для типобезопасности
- **State Management**: (будет определено - возможно Zustand/Redux)
- **Realtime**: WebSocket client (Socket.io client)
- **HTTP Client**: (будет определено - возможно Axios/Fetch)
- **Forms**: (будет определено - возможно React Hook Form)

## Структура страниц

### Аутентификация

**`/login`** - Страница входа
- Форма входа (email/password)
- Кнопка входа через Google OAuth2
- Ссылка на регистрацию
- Восстановление пароля

**`/register`** - Страница регистрации
- Форма регистрации (email, password, name)
- Кнопка регистрации через Google OAuth2
- Ссылка на вход
- Валидация полей

**`/auth/google/callback`** - Callback для Google OAuth2
- Обработка OAuth2 redirect
- Сохранение токенов
- Редирект на главную страницу

### Основное приложение

**`/`** - Главная страница (список диалогов)
- Боковая панель со списком чатов
- Поиск по диалогам
- Фильтры (все/непрочитанные/групповые)
- Создание нового чата
- Индикаторы непрочитанных сообщений
- Статусы пользователей (online/offline)

**`/chat/[id]`** - Страница чата
- История сообщений с пагинацией
- Поле ввода сообщения
- Отправка сообщений
- Вложения (файлы, изображения)
- Статусы доставки сообщений (delivered/read)
- Typing indicator
- Информация о чате
- Участники чата (для групповых)
- Настройки чата

**`/chat/[id]/info`** - Информация о чате
- Название чата
- Участники и их роли
- Настройки чата
- Медиафайлы в чате
- История изменений

**`/profile`** - Профиль пользователя
- Редактирование профиля
- Загрузка аватара
- Настройки аккаунта
- Настройки уведомлений
- Активные сессии
- Выход из аккаунта

**`/settings`** - Настройки приложения
- Общие настройки
- Настройки приватности
- Настройки уведомлений
- Язык и регион
- Тема оформления

## Компоненты

### Layout компоненты

**`Layout`** - Основной layout приложения
- Навигация
- Боковая панель
- Контентная область

**`Sidebar`** - Боковая панель со списком чатов
- Список диалогов
- Поиск
- Фильтры
- Кнопка создания чата

**`Header`** - Шапка приложения
- Название/информация о текущем чате
- Действия (настройки, выход)
- Статус подключения

### Аутентификация

**`LoginForm`** - Форма входа
- Поля email и password
- Валидация
- Обработка ошибок
- Google OAuth2 кнопка

**`RegisterForm`** - Форма регистрации
- Поля регистрации
- Валидация
- Обработка ошибок
- Google OAuth2 кнопка

### Чат

**`ChatList`** - Список чатов
- Отображение списка диалогов
- Сортировка по последнему сообщению
- Индикаторы непрочитанных
- Статусы участников

**`ChatItem`** - Элемент списка чатов
- Аватар чата/пользователя
- Название/имя
- Последнее сообщение
- Время последнего сообщения
- Индикатор непрочитанных

**`ChatWindow`** - Окно чата
- История сообщений
- Поле ввода
- Отправка сообщений
- Скролл к новым сообщениям

**`MessageList`** - Список сообщений
- Отображение сообщений
- Группировка по датам
- Пагинация (загрузка старых сообщений)
- Виртуализация для производительности

**`Message`** - Компонент сообщения
- Текст сообщения
- Вложения
- Время отправки
- Статус доставки (delivered/read)
- Индикатор отправки
- Редактирование/удаление

**`MessageInput`** - Поле ввода сообщения
- Текстовое поле
- Кнопка отправки
- Прикрепление файлов
- Emoji picker
- Typing indicator отправка

**`TypingIndicator`** - Индикатор набора текста
- Отображение "User is typing..."
- Анимация

**`ChatInfo`** - Информация о чате
- Участники
- Настройки
- Медиафайлы

### Пользователи

**`UserAvatar`** - Аватар пользователя
- Изображение или инициалы
- Индикатор online/offline
- Разные размеры

**`UserProfile`** - Профиль пользователя
- Информация о пользователе
- Редактирование
- Настройки

**`UserList`** - Список пользователей
- Отображение списка
- Поиск
- Фильтры

### Утилиты

**`SearchBar`** - Поиск
- Поиск по диалогам
- Поиск по сообщениям
- Автодополнение

**`FileUpload`** - Загрузка файлов
- Drag & drop
- Выбор файлов
- Предпросмотр
- Прогресс загрузки

**`Notification`** - Уведомления
- Toast уведомления
- In-app уведомления
- Звуковые уведомления

**`Loading`** - Индикаторы загрузки
- Skeleton loaders
- Spinners
- Progress bars

**`ErrorBoundary`** - Обработка ошибок
- Отображение ошибок
- Retry механизм

## Функционал

### Real-time коммуникация
- WebSocket подключение для получения сообщений в реальном времени
- Автоматическое переподключение при разрыве соединения
- Синхронизация состояния между вкладками

### Статусы присутствия
- Отображение online/offline статусов пользователей
- Обновление статусов в реальном времени
- Индикаторы в списке чатов и сообщениях

### Статусы сообщений
- Отображение статусов доставки (sent/delivered/read)
- Визуальные индикаторы статусов
- Обновление статусов в реальном времени

### Typing indicator
- Отправка события typing при вводе текста
- Отображение typing indicator от других пользователей
- Автоматическое скрытие через таймаут

### Поиск
- Поиск по диалогам (по названию/участникам)
- Поиск по сообщениям
- Фильтрация результатов

### Пагинация
- Загрузка истории сообщений по частям
- Infinite scroll для старых сообщений
- Оптимизация производительности

### Уведомления
- Push уведомления для новых сообщений
- In-app уведомления
- Настройки уведомлений

### Файлы
- Загрузка файлов и изображений
- Предпросмотр изображений
- Скачивание файлов
- Отображение прогресса загрузки

## Структура проекта

```
frontend/
├── app/                    # Next.js App Router
│   ├── (auth)/            # Группа маршрутов аутентификации
│   │   ├── login/
│   │   ├── register/
│   │   └── auth/
│   ├── (chat)/            # Группа маршрутов чата
│   │   ├── chat/
│   │   └── profile/
│   ├── layout.tsx         # Root layout
│   └── page.tsx           # Главная страница
├── components/            # React компоненты
│   ├── layout/
│   ├── auth/
│   ├── chat/
│   ├── users/
│   └── common/
├── lib/                   # Утилиты и хелперы
│   ├── api/              # API клиент
│   ├── websocket/        # WebSocket клиент
│   ├── hooks/            # Custom hooks
│   └── utils/            # Утилиты
├── store/                 # State management (если используется)
├── types/                 # TypeScript типы
├── public/                # Статические файлы
└── README.md
```

## Установка и запуск

```bash
npm install
npm run dev
```

Приложение будет доступно на `http://localhost:3000`

## Переменные окружения

Создайте файл `.env.local`:

```env
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_WS_URL=ws://localhost:3001
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your-google-client-id
```

## Интеграция с Backend

- REST API для CRUD операций
- WebSocket для real-time коммуникации
- JWT токены для аутентификации
- Google OAuth2 для социального входа
